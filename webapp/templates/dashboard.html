<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CrimeVision AI - Dashboard</title>

    <!-- Bootstrap for Styling -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Google Font -->
    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Inter:wght@400;600;800&display=swap"
        rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='dashboard.css') }}">
</head>

<body>
    <!-- Animated Background -->
    <div class="bg-animation">
        <div id="particles"></div>
    </div>

    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="/">
                <i class="fas fa-shield-alt logo-icon"></i> CrimeVision<span class="text-highlight">AI</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="/"><i class="fas fa-home"></i> Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="/dashboard"><i class="fas fa-chart-line"></i> Dashboard</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/history"><i class="fas fa-history"></i> History</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/settings"><i class="fas fa-cog"></i> Settings</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="main-container dashboard-container">
        <!-- Header Section -->
        <div class="header-section">
            <h1 class="title-text">CrimeVision AI Dashboard</h1>
            <p class="subtitle-text">Real-time crime insights and safety tools</p>
            <div class="tech-badges">
                <span class="badge">Live Updates</span>
                <span class="badge">Safety Analysis</span>
                <span class="badge">Emergency Tools</span>
                <span class="badge">Crime Intelligence</span>
            </div>
        </div>

        <!-- SOS Emergency Button -->
        <div class="sos-container">
            <button id="sos-button" class="sos-button">
                <i class="fas fa-exclamation-triangle"></i> SOS EMERGENCY
            </button>
            <p class="sos-description">Press in case of emergency to share your location with authorities & emergency
                contacts</p>
        </div>

       

        <!-- Main Dashboard Cards Grid -->
        <div class="dashboard-grid">

            <!-- 1. Emergency Contacts -->
            <div id="emergency-contacts-section" class="feature-card" onclick="window.location.href='/emergency-contacts'">
                <div class="card-icon">
                    <i class="fas fa-phone-alt"></i>
                </div>
                <div class="card-content">
                    <h3>Emergency Contacts</h3>
                    <p>Quick access to emergency services and personal contacts</p>
                </div>
                <div class="card-footer">
                    <button class="btn-explore">Explore <i class="fas fa-arrow-right"></i></button>
                </div>
            </div>

            <!-- 2. Crime News & Alerts -->
            <div id="crime-news-section" class="feature-card" onclick="window.location.href='/crime-news'">
                <div class="card-icon">
                    <i class="fas fa-newspaper"></i>
                </div>
                <div class="card-content">
                    <h3>Crime News & Alerts</h3>
                    <p>Latest crime reports, heatmap, and nearby crime alerts</p>
                    <div class="alert-badge">2 new alerts</div>
                </div>
                <div class="card-footer">
                    <button class="btn-explore">Explore <i class="fas fa-arrow-right"></i></button>
                </div>
            </div>


            <!-- 3. Police Stations -->
            <div id="police-stations-section" class="feature-card" onclick="window.location.href='/police-stations'">
                <div class="card-icon">
                    <i class="fas fa-building"></i>
                </div>
                <div class="card-content">
                    <h3>Police Stations</h3>
                    <p>Find nearest police stations and get directions</p>
                    <div class="distance-badge">Nearest: 0.8km</div>
                </div>
                <div class="card-footer">
                    <button class="btn-explore">Explore <i class="fas fa-arrow-right"></i></button>
                </div>
            </div>

            <!-- 4. Cybersecurity -->
            <div id="cybersecurity-section" class="feature-card" onclick="window.location.href='/cybersecurity'">
                <div class="card-icon">
                    <i class="fas fa-shield-alt"></i>
                </div>
                <div class="card-content">
                    <h3>Cybersecurity</h3>
                    <p>Stay protected with cybersecurity tips and resources</p>
                    <div class="alert-badge warning">New scam alert</div>
                </div>
                <div class="card-footer">
                    <button class="btn-explore">Explore <i class="fas fa-arrow-right"></i></button>
                </div>
            </div>

            <!-- 5. Legal Resources -->
            <div id="legal-resources-section" class="feature-card" onclick="window.location.href='/legal-resources'">
                <div class="card-icon">
                    <i class="fas fa-gavel"></i>
                </div>
                <div class="card-content">
                    <h3>Legal Resources</h3>
                    <p>Know your rights and access free legal assistance</p>
                </div>
                <div class="card-footer">
                    <button class="btn-explore">Explore <i class="fas fa-arrow-right"></i></button>
                </div>
            </div>

            <!-- 6. Safety Tools -->
            <div id="safety-tools-section" class="feature-card" onclick="window.location.href='/safety-tools'">
                <div class="card-icon">
                    <i class="fas fa-tools"></i>
                </div>
                <div class="card-content">
                    <h3>Safety Tools</h3>
                    <p>Personal safety tips, workshops, and self-defense resources</p>
                    <div class="event-badge">Workshop: Apr 15</div>
                </div>
                <div class="card-footer">
                    <button class="btn-explore">Explore <i class="fas fa-arrow-right"></i></button>
                </div>
            </div>
        </div>

        <!-- Recent Activity Section -->
        <div class="recent-activity-section">
            <div class="section-header">
                <h2><i class="fas fa-history"></i> Recent Activity</h2>
                <button class="btn-view-all">View All</button>
            </div>
            <div class="activity-timeline">
                {% if recent_activities %}
                    {% for activity in recent_activities %}
                        <div class="activity-item">
                            {% set icon_class = 'info' %}
                            {% set icon_name = 'info-circle' %}
                            
                            {% if activity.type == 'alert' %}
                                {% set icon_class = 'alert' %}
                                {% set icon_name = 'exclamation-circle' %}
                            {% elif activity.type == 'detection' %}
                                {% if activity.crime_detected %}
                                    {% set icon_class = 'alert' %}
                                    {% set icon_name = 'exclamation-triangle' %}
                                {% else %}
                                    {% set icon_class = 'info' %}
                                    {% set icon_name = 'check-circle' %}
                                {% endif %}
                            {% elif activity.type == 'location' %}
                                {% set icon_class = 'location' %}
                                {% set icon_name = 'map-marker-alt' %}
                            {% elif activity.type == 'login' %}
                                {% set icon_class = 'info' %}
                                {% set icon_name = 'user-shield' %}
                            {% elif activity.type == 'emergency' %}
                                {% set icon_class = 'alert' %}
                                {% set icon_name = 'exclamation-triangle' %}
                            {% endif %}
                            
                            <div class="activity-icon {{ icon_class }}">
                                <i class="fas fa-{{ icon_name }}"></i>
                            </div>
                            <div class="activity-content">
                                <h4>{{ activity.title }}</h4>
                                <p>{{ activity.description }}</p>
                                <div class="activity-time" data-timestamp="{{ activity.timestamp }}">
                                    {% if activity.timestamp %}
                                        {{ ((now - activity.timestamp)|abs / 3600)|int }} hour(s) ago
                                    {% else %}
                                        Recently
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                {% else %}
                    <div class="activity-item">
                        <div class="activity-icon info">
                            <i class="fas fa-info-circle"></i>
                        </div>
                        <div class="activity-content">
                            <h4>No Recent Activity</h4>
                            <p>Your recent activities will appear here</p>
                            <div class="activity-time">Just now</div>
                        </div>
                    </div>
                {% endif %}
            </div>
        </div>

        <!-- Quick Stats Section -->
        <div class="quick-stats-section">
            <div class="stats-card">
                <div class="stats-icon">
                    <i class="fas fa-shield-alt"></i>
                </div>
                <div class="stats-content">
                    <h4>Area Safety Index</h4>
                    <div class="stats-value">78<span class="stats-unit">/100</span></div>
                    <div class="stats-trend positive">
                        <i class="fas fa-arrow-up"></i> 5% from last month
                    </div>
                </div>
            </div>
            <div class="stats-card">
                <div class="stats-icon">
                    <i class="fas fa-chart-line"></i>
                </div>
                <div class="stats-content">
                    <h4>Crime Reports</h4>
                    <div class="stats-value">12<span class="stats-unit">this week</span></div>
                    <div class="stats-trend negative">
                        <i class="fas fa-arrow-up"></i> 8% from last week
                    </div>
                </div>
            </div>
            <div class="stats-card">
                <div class="stats-icon">
                    <i class="fas fa-bolt"></i>
                </div>
                <div class="stats-content">
                    <h4>Avg. Response Time</h4>
                    <div class="stats-value">5<span class="stats-unit">min</span></div>
                    <div class="stats-trend positive">
                        <i class="fas fa-arrow-down"></i> 2 min improvement
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-md-4">
                    <div class="footer-brand">
                        <i class="fas fa-shield-alt logo-icon"></i> CrimeVision<span class="text-highlight">AI</span>
                    </div>
                    <p>Making communities safer through technology and awareness</p>
                </div>
                <div class="col-md-4">
                    <h5>Important Links</h5>
                    <ul class="footer-links">
                        <li><a href="#">About Us</a></li>
                        <li><a href="#">Privacy Policy</a></li>
                        <li><a href="#">Terms of Service</a></li>
                        <li><a href="#">Contact Us</a></li>
                    </ul>
                </div>
                <div class="col-md-4">
                    <h5>Connect With Us</h5>
                    <div class="social-icons">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                    <p class="mt-3">Emergency Helpline: <strong>100</strong></p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 CrimeVision AI. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Particles.js for background animation -->
    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>

    <!-- Custom JS -->
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>

    <!-- Smooth Scroll JavaScript -->
    <script>
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                
                const targetId = this.getAttribute('href');
                const targetElement = document.querySelector(targetId);
                
                if (targetElement) {
                    window.scrollTo({
                        top: targetElement.offsetTop - 80, // Offset for navbar height
                        behavior: 'smooth'
                    });
                }
            });
        });
    </script>

    <!-- Particles.js Initialization -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Initialize particles.js
            particlesJS('particles', {
                "particles": {
                    "number": {
                        "value": 80,
                        "density": {
                            "enable": true,
                            "value_area": 800
                        }
                    },
                    "color": {
                        "value": "#ffffff"
                    },
                    "shape": {
                        "type": "circle",
                        "stroke": {
                            "width": 0,
                            "color": "#000000"
                        },
                    },
                    "opacity": {
                        "value": 0.3,
                        "random": true,
                        "anim": {
                            "enable": true,
                            "speed": 1,
                            "opacity_min": 0.1,
                            "sync": false
                        }
                    },
                    "size": {
                        "value": 3,
                        "random": true,
                    },
                    "line_linked": {
                        "enable": true,
                        "distance": 150,
                        "color": "#808080",
                        "opacity": 0.2,
                        "width": 1
                    },
                    "move": {
                        "enable": true,
                        "speed": 1,
                        "direction": "none",
                        "random": true,
                        "straight": false,
                        "out_mode": "out",
                        "bounce": false,
                    }
                },
                "interactivity": {
                    "detect_on": "canvas",
                    "events": {
                        "onhover": {
                            "enable": true,
                            "mode": "grab"
                        },
                        "onclick": {
                            "enable": true,
                            "mode": "push"
                        },
                        "resize": true
                    },
                    "modes": {
                        "grab": {
                            "distance": 140,
                            "line_linked": {
                                "opacity": 0.5
                            }
                        },
                        "push": {
                            "particles_nb": 4
                        }
                    }
                },
                "retina_detect": true
            });
        });
    </script>
</body>

</html>